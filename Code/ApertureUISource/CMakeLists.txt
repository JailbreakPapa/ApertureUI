ns_add_all_subdirs()

if(NOT NS_CMAKE_NO_BUILD_INFO)
	execute_process(
		COMMAND git rev-parse --short=12 HEAD
		WORKING_DIRECTORY ${CMAKE_CURRENT_LIST_DIR}
		OUTPUT_VARIABLE NS_GIT_COMMIT_HASH_SHORT
		OUTPUT_STRIP_TRAILING_WHITESPACE
		)
		
	execute_process(
		COMMAND git rev-parse HEAD
		WORKING_DIRECTORY ${CMAKE_CURRENT_LIST_DIR}
		OUTPUT_VARIABLE NS_GIT_COMMIT_HASH_LONG
		OUTPUT_STRIP_TRAILING_WHITESPACE
		)
		
	execute_process(
		COMMAND git rev-parse --abbrev-ref=strict HEAD
		WORKING_DIRECTORY ${CMAKE_CURRENT_LIST_DIR}
		OUTPUT_VARIABLE NS_GIT_BRANCH_NAME
		OUTPUT_STRIP_TRAILING_WHITESPACE
		)

    set(APUI_V_MAJOR NS_CMAKE_SDKVERSION_MAJOR)
    set(APUI_V_MINOR NS_CMAKE_SDKVERSION_MINOR)
    set(APUI_V_PATCH NS_CMAKE_SDKVERSION_PATCH)
    set(APUI_V_BUILD NS_CMAKE_SDKVERSION_BUILD)

	configure_file("${CMAKE_CURRENT_LIST_DIR}/SDKBuildInfo.h.in" "${CMAKE_CURRENT_LIST_DIR}/SDKBuildInfo.h" NEWLINE_STYLE LF)
endif()